#Sistema de gerenciamento de livros
import matplotlib.pyplot as plt
#Passo 1-- Definir a classe livro
class Livro:
    def __init__(self, titulo, autor, genero, ano_publicacao, editora):
        self.titulo = titulo
        self.autor = autor
        self.genero = genero
        self.ano_publicacao = ano_publicacao
        self.editora = editora
    def __str__(self):
        return f"Título: {self.titulo}\nAutor: {self.autor}\nGênero: {self.genero}\nAno de Publicação: {self.ano_publicacao}\nEditora: {self.editora}"
#Criação de funções para fazer o gerenciamento do livros
class Biblioteca:
    def __init__(self):
        self.livros = []
    def cadastrar_livro(self,titulo, autor, genero, ano_publicacao, editora):
        livro = Livro(titulo, autor, genero, ano_publicacao, editora)
        self.livros.append(livro)
        print(f"Livro {titulo} cadastrado com sucesso!")
    def listar_livros(self):
        if not self.livros:
            print("Nenhum livro cadastrado.")
        else:
            print("Livros Cadastrados:")
            for livro in self.livros:
                print(livro)
    def buscar_livro(self, titulo):
        encontrados = [livro for livro in self.livros if livro.titulo.lower()== titulo.lower()]
        if not encontrados:
            print(f"Nenhum livro encontrado com o título '{titulo}'.")
        else:
            print("Livros encontrados:")
            for livro in encontrados:
                print(livro)
    #Criação do grafico com a biblioteca Matplotlib
    def gerar_grafico_genero(self):
        Genero_quantidade = {}
        for livro in self.livros:
            genero = livro.genero
            if genero in Genero_quantidade:
                Genero_quantidade[genero] += 1
            else:
                Genero_quantidade[genero] = 1

        generos = list(Genero_quantidade.keys())
        quantidades = list(Genero_quantidade.values())

        plt.bar(generos, quantidades)
        plt.xlabel('Gênero')
        plt.ylabel('Quantidade')
        plt.title('Quantidade de Livros por Gênero')
        plt.show()
#Criação do menu do sistema de gerenciamento de livros
def menu():
    biblioteca = Biblioteca()
    while True:
        print("\nMenu:")
        print("1. Cadastrar Livro")
        print("2. Listar Livros")
        print("3. Buscar Livro")
        print("4. Gerar Gráfico de Gênero")
        print("5. Sair")
        escolha = input("Escolha uma opção: ")
        if escolha == "1":
            titulo = input("Título do Livro: ")
            autor = input("Autor do Livro: ")
            genero = input("Gênero do Livro: ")
            ano_publicacao = input("Ano de Publicação do Livro: ")
            editora = input("Editora do Livro: ")
            biblioteca.cadastrar_livro(titulo, autor, genero, ano_publicacao, editora)
        elif escolha == "2":
            biblioteca.listar_livros()
        elif escolha == "3":
            titulo = input("Título do Livro a ser buscado: ")
            biblioteca.buscar_livro(titulo)
        elif escolha == "4":
            biblioteca.gerar_grafico_genero()
        elif escolha == "5":
            print("Saindo do programa.")
            break

        else:
            print("Opção inválida. Tente novamente.")

menu()
